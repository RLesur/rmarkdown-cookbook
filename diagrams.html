<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Mastering R Markdown</title>
  <meta name="description" content="Tips and tricks to build advanced projects in R Markdown">
  <meta name="generator" content="bookdown 0.7.8 and GitBook 2.6.7">

  <meta property="og:title" content="Mastering R Markdown" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Tips and tricks to build advanced projects in R Markdown" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Mastering R Markdown" />
  
  <meta name="twitter:description" content="Tips and tricks to build advanced projects in R Markdown" />
  

<meta name="author" content="Michael Harper">


<meta name="date" content="2018-05-01">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="tables.html">
<link rel="next" href="references.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.2/htmlwidgets.js"></script>
<script src="libs/viz-0.3/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.0/grViz.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Mastering R Markdown with examples</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> About the book</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#recommended-reading"><i class="fa fa-check"></i><b>1.1</b> Recommended Reading</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#overview-of-book"><i class="fa fa-check"></i><b>2.1</b> Overview of Book</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="basics.html"><a href="basics.html"><i class="fa fa-check"></i><b>3</b> Basics</a><ul>
<li class="chapter" data-level="3.1" data-path="basics.html"><a href="basics.html#quick-tips"><i class="fa fa-check"></i><b>3.1</b> Quick Tips</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="managing-big-projects.html"><a href="managing-big-projects.html"><i class="fa fa-check"></i><b>4</b> Managing Big Projects</a><ul>
<li class="chapter" data-level="4.1" data-path="managing-big-projects.html"><a href="managing-big-projects.html#sourcing-files"><i class="fa fa-check"></i><b>4.1</b> Sourcing Files</a></li>
<li class="chapter" data-level="4.2" data-path="managing-big-projects.html"><a href="managing-big-projects.html#caching"><i class="fa fa-check"></i><b>4.2</b> Caching</a></li>
<li class="chapter" data-level="4.3" data-path="managing-big-projects.html"><a href="managing-big-projects.html#notifications"><i class="fa fa-check"></i><b>4.3</b> Notifications</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="latex.html"><a href="latex.html"><i class="fa fa-check"></i><b>5</b> LaTeX</a><ul>
<li class="chapter" data-level="5.1" data-path="latex.html"><a href="latex.html#inserting-commands"><i class="fa fa-check"></i><b>5.1</b> Inserting Commands</a></li>
<li class="chapter" data-level="5.2" data-path="latex.html"><a href="latex.html#latex-preamble"><i class="fa fa-check"></i><b>5.2</b> LaTeX preamble</a></li>
<li class="chapter" data-level="5.3" data-path="latex.html"><a href="latex.html#multi-figure-plots"><i class="fa fa-check"></i><b>5.3</b> Multi-figure plots</a></li>
<li class="chapter" data-level="5.4" data-path="latex.html"><a href="latex.html#cross-output"><i class="fa fa-check"></i><b>5.4</b> Cross-output</a></li>
<li class="chapter" data-level="5.5" data-path="latex.html"><a href="latex.html#latex-subfigures"><i class="fa fa-check"></i><b>5.5</b> LaTeX subfigures</a><ul>
<li class="chapter" data-level="5.5.1" data-path="latex.html"><a href="latex.html#using-with-list"><i class="fa fa-check"></i><b>5.5.1</b> Using with list</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="latex.html"><a href="latex.html#changing-citation-engine"><i class="fa fa-check"></i><b>5.6</b> Changing citation Engine</a></li>
<li class="chapter" data-level="5.7" data-path="latex.html"><a href="latex.html#altering-citation-style"><i class="fa fa-check"></i><b>5.7</b> Altering Citation Style</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="html-output.html"><a href="html-output.html"><i class="fa fa-check"></i><b>6</b> HTML Output</a><ul>
<li class="chapter" data-level="6.1" data-path="html-output.html"><a href="html-output.html#tabbed-headings"><i class="fa fa-check"></i><b>6.1</b> Tabbed headings</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="multi-format-projects.html"><a href="multi-format-projects.html"><i class="fa fa-check"></i><b>7</b> Multi-format projects</a><ul>
<li class="chapter" data-level="7.1" data-path="multi-format-projects.html"><a href="multi-format-projects.html#output-specific-functions"><i class="fa fa-check"></i><b>7.1</b> Output-specific functions</a></li>
<li class="chapter" data-level="7.2" data-path="multi-format-projects.html"><a href="multi-format-projects.html#designing-output"><i class="fa fa-check"></i><b>7.2</b> Designing output</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="knitr-hooks.html"><a href="knitr-hooks.html"><i class="fa fa-check"></i><b>8</b> Knitr Hooks</a></li>
<li class="chapter" data-level="9" data-path="tables.html"><a href="tables.html"><i class="fa fa-check"></i><b>9</b> Tables</a></li>
<li class="part"><span><b>I Additional Packages</b></span></li>
<li class="chapter" data-level="10" data-path="diagrams.html"><a href="diagrams.html"><i class="fa fa-check"></i><b>10</b> Diagrams</a><ul>
<li class="chapter" data-level="10.1" data-path="diagrams.html"><a href="diagrams.html#basic-diagrams"><i class="fa fa-check"></i><b>10.1</b> Basic Diagrams</a></li>
<li class="chapter" data-level="10.2" data-path="diagrams.html"><a href="diagrams.html#adding-parameters-to-plots"><i class="fa fa-check"></i><b>10.2</b> Adding parameters to plots</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>11</b> References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Mastering R Markdown</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="diagrams" class="section level1">
<h1><span class="header-section-number">Chapter 10</span> Diagrams</h1>
<p>It is often useful to express analysis using flowcharts and diagrams within reports. Although there are many separate programs which can be used to produce these, it can be beneficial to create these within our analysis directly. This makes it easier to update and edit the graph if we need to edit it in the future, and allows us to use the results from our analysis directly within the diagrams, making them more information.</p>
<p>While there are several different packages available for R, we will focus on the package <strong>DiagrammeR</strong> <span class="citation">(Iannone <a href="#ref-R-DiagrammeR">2018</a>)</span>. We also recommend that you read at <a href="http://rich-iannone.github.io/DiagrammeR/index.html" class="uri">http://rich-iannone.github.io/DiagrammeR/index.html</a> . In this chapter we will explain some of the basic usages of the package.</p>
<div id="basic-diagrams" class="section level2">
<h2><span class="header-section-number">10.1</span> Basic Diagrams</h2>
<p><strong>DiagrammeR</strong> provides methods to build graphs for a number of different graphing languages.</p>
<p>R Studio provides native support for Graphviz (<code>.gv</code>) and mermaid (<code>.mmd</code>) files. Using files of these types in RStudio provides the advantage of syntax coloring and allowing a quick preview of the diagram. For example, we can make a simple flowchart with the following code:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">DiagrammeR<span class="op">::</span><span class="kw">grViz</span>(<span class="st">&quot;digraph {</span>

<span class="st">        graph [layout = dot, rankdir = LR]</span>
<span class="st">        </span>
<span class="st">        node [shape = rectangle]        </span>
<span class="st">        rec1 [label = &#39;Step 1&#39;]</span>
<span class="st">        rec2 [label = &#39;Step 2&#39;]</span>
<span class="st">        rec3 [label =  &#39;Step 3&#39;]</span>
<span class="st">        rec4 [label = &#39;Step 4&#39;]</span>

<span class="st">        # edge definitions with the node IDs</span>
<span class="st">        rec1 -&gt; rec2 -&gt; rec3 -&gt; rec4</span>
<span class="st">        }&quot;</span>,
        <span class="dt">height =</span> <span class="dv">200</span>)</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:diagrammeR-basic"></span>
<div id="htmlwidget-6856226a0d33dcf20a44" style="width:100%;height:200px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-6856226a0d33dcf20a44">{"x":{"diagram":"digraph {\n\n        graph [layout = dot, rankdir = LR]\n        \n        node [shape = rectangle]        \n        rec1 [label = \"Step 1\"]\n        rec2 [label = \"Step 2\"]\n        rec3 [label =  \"Step 3\"]\n        rec4 [label = \"Step 4\"]\n\n        # edge definitions with the node IDs\n        rec1 -> rec2 -> rec3 -> rec4\n        }","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
<p class="caption">
Figure 10.1: A basic graphic using DiagrammeR
</p>
</div>
<p>There are extensive controls which can be used to control the shape of nodes, colours, line types and add additional parameters.</p>
</div>
<div id="adding-parameters-to-plots" class="section level2">
<h2><span class="header-section-number">10.2</span> Adding parameters to plots</h2>
<p>We can allow</p>
<p>Graphviz substitution allows for mixing in R expressions into a Graphviz graph specification without sacrificing readability.</p>
<p>If you specify a subsitution with <code>@@</code>, you must ensure there is a valid expression for that substitution. The expressions are placed as footnotes and their evaluations must result in an R vector object (i.e., not a data frame, list, or matrix). Because there is the possibility to have multiple substitutions, numbering is required. Thus, the @@ notation is immediately followed by a number and that number should correspond to the number of the footnoted R expression.</p>
<p>For example, suppose we have a dataset which is being analysed, and we would like to identify how many values are removed at each stage of a process.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">DiagrammeR<span class="op">::</span><span class="kw">grViz</span>(<span class="st">&quot;</span>
<span class="st">digraph graph2 {</span>

<span class="st">graph [layout = dot, rankdir = LR]</span>

<span class="st"># node definitions with substituted label text</span>
<span class="st">node [shape = rectangle]</span>
<span class="st">a [label = &#39;@@1&#39;]</span>
<span class="st">b [label = &#39;@@2&#39;]</span>
<span class="st">c [label = &#39;@@3&#39;]</span>
<span class="st">d [label = &#39;@@4&#39;]</span>

<span class="st">a -&gt; b -&gt; c -&gt; d</span>

<span class="st">}</span>

<span class="st">[1]: paste(&#39;Input Data&#39;, 1)</span>
<span class="st">[2]: paste(&#39;Step &#39;, 1)</span>
<span class="st">[3]: paste(&#39;Step &#39;, 1)</span>
<span class="st">[4]: paste(&#39;Step &#39;, 1)</span>
<span class="st">&quot;</span>)</code></pre></div>
<div id="htmlwidget-fd58d34eea4ab7a1f0e8" style="width:672px;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-fd58d34eea4ab7a1f0e8">{"x":{"diagram":"\ndigraph graph2 {\n\ngraph [layout = dot, rankdir = LR]\n\n# node definitions with substituted label text\nnode [shape = rectangle]\na [label = \"Input Data 1\"]\nb [label = \"Step  1\"]\nc [label = \"Step  1\"]\nd [label = \"Step  1\"]\n\na -> b -> c -> d\n\n}","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>

</div>
</div>
<h3> References</h3>
<div id="refs" class="references">
<div id="ref-R-DiagrammeR">
<p>Iannone, Richard. 2018. <em>DiagrammeR: Graph/Network Visualization</em>. <a href="https://CRAN.R-project.org/package=DiagrammeR" class="uri">https://CRAN.R-project.org/package=DiagrammeR</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="tables.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="references.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/mikey-harper/mastering-rmarkdown/edit/master/10-Diagrams.Rmd",
"text": "Edit"
},
"download": ["mastering-rmarkdown.pdf", "mastering-rmarkdown.epub"],
"toc": {
"collapse": "subsection"
},
"split_by": "section"
});
});
</script>

</body>

</html>
